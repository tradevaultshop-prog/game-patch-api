# render.yaml
services:
  # 1. WEB SERVİSİ (SADECE API SUNAR)
  - type: web
    name: game-patch-api
    env: python
    buildCommand: pip install -r requirements.txt
    # Sadece API'yi başlat. Scraping komutunu ÇIKAR.
    startCommand: uvicorn main:app --host 0.0.0.0 --port $PORT 
    envVars:
      - key: GEMINI_API_KEY
        sync: false 

  # 2. WORKER SERVİSİ (VERİ OLUŞTURMA İŞİ)
  - type: worker
    name: patch-scraper
    env: python
    # Worker, API ile aynı bağımlılıklara ihtiyaç duyar.
    buildCommand: pip install -r requirements.txt
    # Worker'ın tek görevi scraping scriptini çalıştırmaktır.
    startCommand: python scrape.py
    # Not: worker servisini Render'da manuel olarak başlatmanız/planlamanız gerekebilir.
    envVars:
      - key: GEMINI_API_KEY
        sync: false